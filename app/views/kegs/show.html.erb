<% provide(:title, "BarCVVR Fût "+params[:id]) %>

<table class="col s12 l7 centered highlight striped" id="Table">
  <thead>
    <tr>
      <th>Boisson</th>
      <th>Startdate</th>
      <th>Enddate</th>
      <th>Capacité</th>
      <th>Prix</th>
      <th>Nombre de boisson payées</th>
      <th>Rentabilité</th>
    </tr>
  </thead>

  <tbody>
      <tr>
        <td><%= Drink.find(@keg.drink_id).name %></td>
        <td><%= @keg.startDate %></td>
        <td><%= @keg.endDate %></td>
        <td><%= number_with_precision(@keg.capacity, precision: 2).sub(/\.00$/,'') %>l</td>
        <td><%= number_with_precision(@keg.price, precision: 2).sub(/\.00$/,'') %>€</td>
        <td><%= number_with_precision(@opNum, precision: 2).sub(/\.00$/,'') %></td>
        <td><%= number_with_precision(@profit, precision: 2).sub(/\.00$/,'') %>€</td>
      </tr>
  </tbody>
</table>

<script>
<% if notice %>
Materialize.toast('<%= notice %>', 4000) // 4000 is the duration of the toast
<% end %>

table = document.getElementById("Table");
tr = table.getElementsByTagName("tr");
for (i = tr.length -1; tr[i]; i--) {
  td = tr[i].getElementsByTagName("td")[1];
  date = new Date(/^([0-9\-\s\:]+UTC)/.exec(td.innerHTML)[0]);
  td.innerHTML = date.toLocaleString();
  td = tr[i].getElementsByTagName("td")[2];
  date = new Date(/^([0-9\-\s\:]+UTC)/.exec(td.innerHTML)[0]);
  td.innerHTML = date.toLocaleString();
}
</script>
